# AMPEL360 H₂-BWB-Q Copilot Instructions

## Project Overview

AMPEL360 H₂-BWB-Q is an advanced aerospace engineering framework for optimizing hydrogen-powered Blended Wing Body (BWB) aircraft configurations using quantum-inspired algorithms. This project represents a paradigm shift in aircraft design, integrating CAD-AI Convert technology with QAOA (Quantum Approximate Optimization Algorithm) for multi-disciplinary design optimization.

## Core Technologies & Concepts

### Aerospace Domain
- **BWB (Blended Wing Body)**: Revolutionary aircraft configuration integrating wing and fuselage
- **H₂ Propulsion**: Hydrogen fuel cell and combustion propulsion systems
- **TRL (Technology Readiness Level)**: Scale 1-9 measuring technology maturity
- **L/D Ratio**: Lift-to-drag ratio, critical aerodynamic performance metric
- **Cryogenic Systems**: Ultra-low temperature hydrogen storage and handling
- **AMPEL**: Aircraft donor program providing validated subsystem components

### Quantum Optimization
- **QAOA**: Quantum Approximate Optimization Algorithm for combinatorial problems
- **CVaR**: Conditional Value at Risk for risk-aware optimization
- **QUBO**: Quadratic Unconstrained Binary Optimization problem formulation
- **Quantum Annealing**: Quantum computing approach for optimization problems
- **QNNN**: Quantum Numeric Notation for Number of passengers (encoding passenger capacity for quantum optimization)

### CAD-AI Convert Technology
- **Quantum Conversion Bridge (QCB)**: Core AI technology for 2D to parametric 3D CAD conversion
- **Multi-Modal AI**: Integrates visual, textual, and physics-based constraints
- **Parametric Systems Model**: All components parametrically linked with real-time updates
- **Constraint-Aware Design**: Physics and engineering constraints embedded in design process
- **Digital Twin Integration**: Real-time collaborative modeling environment

## Framework Architecture (O-P-T-I-M)

### O-ORGANIZATIONAL
- **ARB**: Architecture Review Board with decision authority
- **SRB**: Safety Review Board for safety-critical systems
- **DSC**: Design Security Committee for cybersecurity
- **CCB**: Change Control Board for configuration management
- **Governance**: Committees, charters, and financial control systems

### P-PROCEDURAL  
- **UTCS Phases**: 11-phase Universal Technical Classification System
- **Workflows**: CI/CD pipelines, approval processes, quality gates
- **Tool Procedures**: QAOA optimization protocol, CFD simulation workflows
- **MLOps**: Model versioning, drift detection, training procedures

### T-TECHNOLOGICAL
- **AMEDEO-PELLICCIA**: Integrated component architecture methodology  
- **Configuration Items (CI)**: Atomic engineering components with full lifecycle data
- **Component Architecture (CA)**: Grouped CIs by functional domain
- **Subsystem Hierarchy**: Structured breakdown of aircraft systems

### I-INTELLIGENT (Framework Layer)
- **AI/ML Models**: Predictive analytics and decision support systems
- **Optimization Engines**: QAOA implementation and classical algorithms
- **Digital Twin**: Real-time system modeling and simulation

### M-MACHINE (Implementation Layer)
- **Simulation Models**: Aerodynamics, structures, propulsion, cryogenics, controls
- **Co-simulation**: Integrated multi-physics modeling environment
- **HIL/SIL**: Hardware-in-Loop and Software-in-Loop testing

## Key Files & Structure

### Configuration Management
- `ampel360_config.json` - Main framework configuration with architecture definitions
- `ampel360-config.yaml` - Alternative YAML configuration format
- `ampel360_utils.py` - Configuration management utilities and validation

### Optimization System
- `OPTIM-FRAMEWORK/I-INTELLIGENT/scripts/qaoa_over_F.py` - QAOA optimization implementation over feasible set
- `constraints/hard_constraints.yaml` - TRL gates, compatibility matrices, physics bounds
- `OPTIM-FRAMEWORK/I-INTELLIGENT/data/candidates.yaml` - AMPEL donor aircraft subsystem database
- `feasible_set.json` - Generated feasible configurations (Stage 1 output)
- `qnnn_optimization_result.json` - Optimal configuration selection (Stage 2 output)

### Framework Structure
- `OPTIM-FRAMEWORK/` - Enterprise framework with O-P-T-I-M structure
- `setup_ampel360.py` - Complete framework setup and demonstration script
- `requirements.txt` - Python dependencies (NumPy, PyYAML)

## Optimization Pipeline

### Stage 1: Deterministic Feasibility Generation
```python
# Input: candidates.yaml + hard_constraints.yaml
# Output: feasible_set.json (all viable configurations)
```

### Stage 2: Risk-Averse Stochastic Optimization  
```python
# QAOA-based CVaR optimization
# Objective: minimize E[cost] + β·CVaR_α(cost)
# Output: qnnn_optimization_result.json (optimal selection)
```

## Domain-Specific Terminology

### Aircraft Systems
- **Primary Structure**: Main load-bearing airframe components
- **Flight Controls**: Surfaces and systems for aircraft control
- **Avionics**: Aviation electronics and instrumentation
- **Landing Gear**: Retractable landing system components
- **Cabin**: Passenger compartment and life support systems

### BWB-Specific Terms
- **Distributed Propulsion**: Multiple engines distributed along wingspan
- **BLI (Boundary Layer Ingestion)**: Ingesting boundary layer air for efficiency
- **Flush-Mounted Systems**: Systems integrated into wing surface
- **Plasma Actuators**: Advanced flow control technology
- **Atmospheric Plasma**: Ionized gas for stealth and flow control

### Hydrogen Systems  
- **Cryogenic Storage**: Ultra-low temperature H₂ storage tanks
- **Fuel Cells**: Electrochemical H₂ to electricity conversion
- **H₂ Combustion**: Direct hydrogen burning for propulsion
- **Liquefaction**: Converting gaseous H₂ to liquid for storage
- **Crashworthiness**: Safety under crash conditions

### Risk & Optimization
- **CVaR Alpha**: Confidence level for risk assessment (typically 0.8)
- **Beta Parameter**: Risk aversion coefficient in objective function
- **Approximation Ratio**: Quality measure for quantum optimization
- **Convergence Criteria**: Stopping conditions for iterative optimization

## Development Guidelines

### Code Style
- Use descriptive variable names reflecting aerospace domain (e.g., `wing_chord`, `h2_tank_volume`)
- Include units in comments for physical quantities
- Maintain traceability to requirements and constraints
- Document optimization parameters and their physical meaning

### File Naming Conventions
- Configuration Items: `CI-CA-<DOMAIN>-<ID>-<COMPONENT>/`
- Procedures: `<domain>-<procedure>-protocol.md`
- Data Files: `<system>_<type>_<version>.yaml`
- Results: `<analysis>_optimization_result.json`

### Quantum Algorithm Development
- Always validate QUBO formulation before optimization
- Document circuit depth justification for QAOA
- Include classical baseline comparisons
- Record quantum advantage metrics

### Safety & Certification Considerations  
- All changes must maintain TRL gates compliance
- Document safety impact assessments
- Ensure traceability to certification requirements
- Maintain configuration control through CCB

## Integration Points

### CAD-AI Convert Workflow
1. **Conceptualization**: Multi-modal AI generates technically-informed designs
2. **Conversion**: Quantum Conversion Bridge creates parametric 3D models
3. **Optimization**: Real-time quantum-optimized structural generation
4. **Collaboration**: Multi-disciplinary teams work on shared intelligent model
5. **Validation**: Instantaneous consequence analysis across all systems

### Team Collaboration Patterns
- **Dr. Rostova**: Aerodynamics specialist working on BWB flow optimization
- **Dr. Thorne**: Propulsion engineer optimizing H₂ systems integration  
- **Ben**: Structures engineer implementing quantum-optimized lattice designs
- **Chloe**: AI prompt specialist crafting constraint-embedded design suggestions
- **Maria**: Systems integration ensuring cross-domain compatibility

## Common Operations

### Setup & Validation
```bash
python3 setup_ampel360.py          # Complete framework setup
python3 ampel360_utils.py --status  # Check configuration status
python3 ampel360_utils.py --validate # Validate all file paths
```

### Optimization Workflow
```bash
python3 OPTIM-FRAMEWORK/I-INTELLIGENT/scripts/qaoa_over_F.py --optimize  # Run QAOA optimization
python3 ampel360_utils.py --set-qnnn <value>  # Update passenger capacity
```

### Framework Validation
```bash
make validate                       # Run all validation checks
make clean                         # Clean generated files
make docs                          # Generate documentation
```

## Specific Constraints & Examples

### Current P2 Configuration
The project is in P2 phase with specific architecture:
- **Fuselage**: Donor 24 (BWB Primary)
- **Wing**: Donor 34 (Advanced Morphing) - provides L/D ratio of 24.8
- **Primary Structure**: Donor 24 (TRL 7, crashworthiness 0.85)
- **Propulsion**: Donor 37 (H₂ Turbofan)
- **Energy**: Donor 38 (H₂ BWB rear-mounted)
- **QNNN**: Currently optimized for 150 passengers

### Hard Constraints Example
```yaml
# TRL gates that must be satisfied
trl_gates:
  wing: 6
  primary_structure: 7
  avionics: 8

# Only certain wing-fuselage combinations allowed
allowed_pairs:
  wing_fuselage:
    - [24, 24]  # BWB-BWB
    - [34, 24]  # Advanced wing with BWB fuselage
```

### QAOA Optimization Parameters
```python
# Risk parameters in current configuration
risk:
  cvar_alpha: 0.8    # 80% confidence level
  beta: 0.25         # Risk aversion coefficient

# Objective function: E[cost] + 0.25 * CVaR_0.8(cost)
```

## CAD-AI Convert Integration Context

### Multi-Disciplinary Collaboration Scenario
When suggesting code for CAD-AI Convert integration, consider these realistic team interactions:

1. **Chloe (AI Prompt Specialist)**: Creates prompts with embedded constraints
   ```python
   # Example: H₂ tank placement with technical constraints
   prompt = """BWB aircraft with distributed H₂ tanks, maintaining CG within 15% MAC, 
            ensuring 4-meter clearance from passenger cabin, optimized for L/D > 22"""
   ```

2. **Dr. Thorne (Propulsion Engineer)**: Modifies H₂ system parameters
   ```python
   # Real-time parametric updates
   h2_tank_volume = 850  # liters, triggers cascade updates
   # Automatically notifies: cabin height, lattice density, CG location
   ```

3. **Ben (Structures Engineer)**: Implements quantum-optimized lattice
   ```python
   # Quantum annealing for structural optimization
   lattice_density_gradient = qaoa_optimize(
       objective="minimize_weight + maximize_stiffness",
       constraints=["vibration_damping > 0.8", "load_path_integrity"]
   )
   ```

### Real-Time Consequence Analysis Example
```python
# When Dr. Thorne increases H₂ tank volume by 10%:
consequence_analysis = {
    "cabin_height": "reduced by 3.2%",  # Immediate geometric impact
    "lattice_density": "increased 8% in tank vicinity",  # Structural response
    "cg_shift": "aft 0.7% MAC",  # Flight dynamics impact
    "evacuation_time": "increased to 87s",  # Safety validation
    "notifications": ["Chloe: cabin_constraints", "Ben: stress_concentration"]
}
```

## Development Best Practices

### Quantum Algorithm Implementation
```python
# Always include these validation steps for QAOA
def validate_qaoa_implementation():
    assert qubo_matrix.shape == (n_qubits, n_qubits)
    assert circuit_depth >= 1  # p-layers
    assert len(beta_params) == len(gamma_params) == circuit_depth
    # Verify classical baseline comparison
```

### BWB-Specific Geometric Constraints
```python
# BWB geometry validation
def validate_bwb_geometry(config):
    assert config['fuselage_type'] == 'BWB'
    assert config['wing_fuselage_blend_ratio'] > 0.6
    assert config['span_loading'] < 450  # kg/m for structural limits
    assert config['cabin_height'] >= 1.8  # minimum headroom
```

### Hydrogen Safety Protocols
```python
# Critical safety checks for H₂ systems
def validate_h2_safety(tank_config):
    assert tank_config['double_wall'] == True
    assert tank_config['pressure_rating'] >= 350  # bar
    assert tank_config['cabin_separation'] >= 4.0  # meters
    assert tank_config['ventilation_rate'] >= 10  # air changes/hour
```

When working on this project, always consider the multi-disciplinary nature of aircraft design, the cutting-edge integration of quantum optimization with aerospace engineering, and the revolutionary potential of CAD-AI Convert technology to transform complex system design workflows. The framework represents a new paradigm where design is intrinsically integrated, quantum-optimized, and collaboratively iterated in real-time.